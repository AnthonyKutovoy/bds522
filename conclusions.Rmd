---
title: "Do craft beer ratings front-run sales?"
author: "Anthony Kutovoy"
date: "December 7, 2018"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(latexpdf)
library(stringr)
beer_reviews <- read.csv("beer_reviews.csv")
unique_reviews <- distinct(beer_reviews, review_profilename, .keep_all = T)
attach(unique_reviews)
unique_reviews <- unique_reviews[, c("review_profilename", "review_time", "review_overall", "beer_style")]
unique_reviews <- unique_reviews[order(review_time),]
```

## Introduction

In modern history, Beer has been a big business worldwide and especially in the United states. Here it is manufactured by more than 3,000 breweries, which range in size from industry giants to brew pubs and microbreweries. The United States produced 196 million barrels (23.0 GL) of beer in 2012, and consumes roughly 28 US gallons (110 L) of beer per capita annually in USA (citation coming).

Although lager & pilsner sales from large breweries have preserved their dominance for 100 years, since the 1990s their market share has been steadily decreasing due to emergence of craft and particularly IPA-style beers, which have been leading craft sales figures for 2 decades. While growth in craft sales has had a steady, linear growth pattern between 1990s and mid-2000s, over the last decade the number of craft breweries and the volume of craft sales have been increasing exponentially (citation coming). I seek to investigate whether craft beer rating trends during the slower growth periods for top-selling styles are correlated with future accelerating growth in sales.

## Analytical Strategy

### Data

Roughly 1.5 million observations of 104 beer styles (mostly craft) between 2000 and 2012 are provided from Beeradvocate. Upon reviewing the data, it became apparent that most reviewers have submitted multiple entries, which makes weighing of each review unpredictable. To control for this factor, a sample was drawn from the dataset such that each observation had a unique review_profilename. Of interest are the following variables: review_profilename, review_time, review_overall, and beer_style. 

```{r}
summary(unique_reviews)

```
```{r}
hist(review_overall)
```
<br>Beer ratings in the sample are left-skewed, indicating that most reviewers enjoyed the beers they were reviewing. 
```{r}
hist(review_time)
```

Distribution by time shows an increase in frequency of reviews in later years, with the median of Unix date of 1249000000 or July 31st, 2009. 

### Methods
IPAs have been dominating craft beer sales for decades whule Stouts have emerged more recently as a popular style, so our analysis will focus on these two. Using the median date of 1249000000, I will be using a t-test to compare mean ratings respecitvely for IPAs and Stouts to see if there is a difference between them as overall craft sales increased over time.

My null hypothesis are          <br>
      $\mu(ipa_1) = \mu(ipa_2)$ <br>
      $\mu(stout_1) = \mu(stout_2)$


```{r}
ipas <- unique_reviews %>% filter(str_detect(beer_style, "IPA"))
stouts <- unique_reviews %>% filter(str_detect(beer_style, "Stout|Black|Porter"))

t.test(ipas$review_overall[ipas$review_time>1249000000], ipas$review_overall[ipas$review_time<1249000000], mu=0, alternative = "two.sided")

t.test(stouts$review_overall[stouts$review_time>1249000000], stouts$review_overall[stouts$review_time<1249000000], mu=0, alternative = "two.sided")
```


## Results
t.test for IPAs has a p-value of 0.53, so we cannot reject the null hypothesis. for Stouts, however, the p-value of 0.0074 shows statistical significance in the difference of the mean rating between 2000-2009 and 2009-2012 periods. 
```{r}

```

```{r}

```


## Conclusion




## Misc analyses

```{r}

```


